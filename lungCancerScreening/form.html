<div class="container">

    <p>The National Lung Screening Trial (NLST) compared two ways of finding out whether someone has lung cancer: <a href="http://www.cancer.gov/types/lung/patient/lung-screening-pdq#section/_13" target="_blank">low-dose helical computed tomography (CT) (also known as spiral CT) and a standard chest X-ray</a>. The study found that CT lung screening reduced lung cancer death.  As a result, the <a href="http://www.uspreventiveservicestaskforce.org/Page/Document/UpdateSummaryFinal/lung-cancer-screening " target="_blank">US Preventative Services Task Force </a>(a group of experts who make recommendations about prevention) recommends CT lung screening for those 55-80 years of age, who smoked at least <a href="http://www.cancer.gov/publications/dictionaries/cancer-terms?cdrid=306510" target="_blank">30 pack-years</a>, and no more than 15 years since quitting.  This online tool, the Risk-based NLST Outcomes tool (RNOT), uses data from the NLST to give information about whether someone like you would be recommended to have screening.  The RNOT also predicts your chance of getting a lung cancer diagnosis, your chance of dying from lung cancer, and your risk of a <a href="http://www.cancer.gov/publications/dictionaries/cancer-terms?cdrid=340929">false</a> alarm (a person has a positive screening test but does not actually have lung cancer) using some basic information you provide about yourself and your smoking behavior.</p>

    <strong><p>The best way to lower your risk of lung cancer, and all smoking-related diseases, is to quit smoking. Learn more by visiting <a href="http://smokefree.gov" target="smokefree">smokefree.gov</a> and the CDC page on <a href="http://www.cdc.gov/tobacco/quit_smoking/" target="cdcSmokeFree">quitting smoking</a> or call 1-800-QUIT-NOW.</p></strong>

    <div class="row col-md-6">
        <div class="panel panel-default">
            <div class="panel-heading panel-title">
                Risk Tool
            </div>
            
            <div class="panel-body">
                <strong><p>
                CT lung screening is <a href="http://www.uspreventiveservicestaskforce.org/Page/Document/UpdateSummaryFinal/lung-cancer-screening" target="_blank">not recommended</a> if (1) you are younger than 55 or older than 80, (2) you have never smoked, (3) you are a current smoker, but you have smoked less than 30 <a href="http://www.cancer.gov/publications/dictionaries/cancer-terms?cdrid=306510" target="_blank">pack-years</a> (such as those who smoked 1 pack per day for 30 years or 2 packs per day for 15 years), or (3) you are a former smoker who quit more than 15 years ago.
                </p></strong>

                <form class="form-horizontal" name="lcs_form" ng-submit="form.submit()">
                    <div class="form-group">
                        <label for="age" class="col-md-6 control-label">Age</label>
                        <div class="col-md-6">
                            <input type="number" name="age" class="form-control input-sm" 
                                min="50" 
                                max="80" 
                                ng-pattern="/^[0-9]+(\.[0-9]+)?/" 
                                ng-model="form.fields.age" 
                                ng-model-options="{updateOn: 'blur'}" 
                                required>
                        </div>
                    </div>

                    <!-- age validation messages -->
                    <div class="has-error" ng-messages="lcs_form.age.$error" ng-if="lcs_form.age.$touched && !lcs_form.$pristine">
                        <span ng-message="required">
                            <p>Please enter your age.</p>
                        </span>

                        <span ng-message="pattern">
                            <p>Please ensure the age entered above is above 0 and does not contain any non-numeric characters.</p>
                        </span>

                        <span ng-message="min, max">
                            <p>This tool calculates risk for men and women 50 to 80 years of age only, because the <a href="http://www.uspreventiveservicestaskforce.org/Page/Document/UpdateSummaryFinal/lung-cancer-screening" target="_blank">U.S. Preventive Services Task Force</a> does NOT recommend that you get screened unless you are between the age of 55 and 80, because the harms of a false alarm are higher than the benefits for screening people in your age group.</p>
                            <strong><p>The best way to lower your risk of lung cancer, and all smoking-related diseases, is to quit smoking. Learn more by visiting <a href="http://smokefree.gov" target="_blank">smokefree.gov</a> and the CDC page on <a href="http://www.cdc.gov/tobacco/quit_smoking/" target="_blank">quitting smoking</a> or call 1-800-QUIT-NOW</p></strong>
                        </span>
                    </div>

                    <div class="form-group">
                        <label for="gender" class="col-md-6 control-label">Gender</label>
                        <div class="col-md-6">
                            <select name="gender" id="gender" class="form-control input-sm" ng-model="form.fields.gender" required>
                                <option value="">Select...</option>
                                <option value="0">Male</option>
                                <option value="1">Female</option>
                            </select>
                        </div>
                    </div>

                    <!-- gender validation messages -->
                    <div class="has-error" ng-messages="lcs_form.gender.$error" ng-if="lcs_form.gender.$touched && !lcs_form.$pristine">
                        <span ng-message="required">
                            <p>Please select a gender.</p>
                        </span>
                    </div>

                    <div class="form-group">
                        <label for="smoker_type" class="col-md-6 control-label">Type of Smoker?</label>
                        <div class="col-md-6">
                            <select name="smoker_type" id="smoker_type" class="form-control input-sm" ng-model="form.fields.type" required>
                                <option value="">Select...</option>
                                <option value="current">Current Smoker</option>
                                <option value="former">Former Smoker</option>
                                <option value="non">Non Smoker</option>
                            </select>
                        </div>
                    </div>

                    <!-- smoker_type validation messages -->
                    <div class="has-error" ng-messages="lcs_form.smoker_type.$error" ng-if="lcs_form.smoker_type.$touched && !lcs_form.$pristine">
                        <span ng-message="required">
                            <p>Please select an option from the dropdown menu.</p>
                        </span>
                    </div>               

                    <div class="form-group" ng-if="form.fields.type === 'current' || form.fields.type === 'former'">
                        <label for="start_age" class="col-md-6 control-label">What age did you start smoking?</label>
                        <div class="col-md-6">
                            <input type="number" name="start_age" class="form-control input-sm" 
                                min="1" 
                                max="{{+form.fields.age}}" 
                                ng-model="form.fields.start_age" 
                                ng-model-options="{updateOn: 'blur'}" required>
                        </div>
                    </div>

                    <div class="form-group" ng-if="form.fields.type == 'current'">
                        <label for="cpd" class="col-md-6 control-label">On a typical day, how many cigarettes do you smoke?</label>
                        <div class="col-md-6">
                            <input type="number" name="cpd" class="form-control input-sm" 
                                min="{{form.validation.cpd(10)}}" 
                                max="{{form.validation.cpd(70)}}" 
                                ng-model="form.fields.cpd" 
                                ng-model-options="{updateOn: 'blur'}" 
                                required>
                        </div>
                    </div>

                    <div ng-if="form.fields.type == 'former'">
                        <div class="form-group">
                            <label for="stop_age" class="col-md-6 control-label">What age did you stop smoking for good?</label>
                            <div class="col-md-6">
                                <input type="number" name="stop_age" class="form-control input-sm" 
                                    min="{{form.fields.start_age || 0}}" 
                                    max="{{form.fields.age || 0}}" 
                                    ng-model="form.fields.stop_age" 
                                    ng-model-options="{updateOn: 'blur'}" 
                                    required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="cpd" class="col-md-6 control-label">On a typical day, how many cigarettes did you smoke before you quit for good?</label>
                            <div class="col-md-6">
                                <input type="number" name="cpd" class="form-control input-sm" 
                                    min="{{form.validation.cpd(10)}}" 
                                    max="{{form.validation.cpd(70)}}" 
                                    ng-model="form.fields.cpd" 
                                    ng-model-options="{updateOn: 'blur'}" 
                                    required>
                            </div>
                        </div>
                    </div>

                    <div class="help-block" ng-if="form.fields.type == 'non'">
                        You are <a href="http://www.uspreventiveservicestaskforce.org/Page/Document/UpdateSummaryFinal/lung-cancer-screening" target="_blank">NOT recommended</a> to get screened because you are not a smoker, because the harms of a false alarm are higher than the benefits for screening a non-smoker.
                    </div>

                    <!-- start_age validation messages -->
                    <div class="has-error" ng-messages="lcs_form.start_age.$error" ng-if="lcs_form.start_age.$touched && !lcs_form.$pristine">
                        <span ng-message="required">
                            <p>Please enter the age at which you started smoking.</p>
                        </span>

                        <span ng-message="pattern">
                            <p>Please ensure the starting age entered above does not contain any non-numeric characters.</p>
                        </span>

                        <span ng-message="min, max">
                            <p>Please ensure that the starting age entered above is greater than 0 and less than or equal to your current age.</p>
                        </span>
                    </div>

                    <!-- stop_age validation messages -->
                    <div class="has-error" ng-messages="lcs_form.stop_age.$error" ng-if="lcs_form.stop_age.$touched && !lcs_form.$pristine">
                        <span ng-message="required">
                            <p>Please enter the age at which you quit smoking.</p>
                        </span>

                        <span ng-message="pattern">
                            <p>Please ensure the quitting age entered above does not contain any non-numeric characters.</p>
                        </span>

                        <span ng-message="min, max">
                            <p>Please ensure that the quitting age entered above is less than your current age and greater than or equal to your starting age.</p>
                        </span>
                    </div>

                    <!-- cigarettes_per_day validation messages -->
                    <div class="has-error" ng-messages="lcs_form.cpd.$error" ng-if="lcs_form.cpd.$touched && !lcs_form.$pristine">
                        <span ng-message="required">
                            <p>Please provide values for all inputs.</p>
                        </span>

                        <span ng-message="pattern">
                            <p>Please ensure the values entered above do not have any non-numeric characters.</p>
                        </span>

                        <span ng-message="min, max">
                            <p>The number of pack-years is outside the range of 10 - 70 ({{form.validation.cpd(10)}} - {{form.validation.cpd(70)}} cigarettes per day)</p>
                        </span>
                    </div>

                    <div class="form-group">
                        <div id="copd_dialog" title="Lung disease" style="display:none">
                            <p>COPD stands for <a href="https://www.nlm.nih.gov/medlineplus/copd.html" target="_blank">chronic obstructive pulmonary disease</a>.  <a href="https://www.nlm.nih.gov/medlineplus/emphysema.html" target="_blank">Emphysema</a> is a type of COPD.</p>
                        </div>

                        <label for="disease" class="col-md-6 control-label">Lung disease?</label>
                        <div class="col-md-6">
                            <div class="input-group">
                                <select name="disease" id="disease" class="form-control input-sm" ng-model="form.fields.disease" required>
                                    <option value="">Select...</option>
                                    <option value="1">COPD or Emphysema or chronic bronchitis</option>
                                    <option value="0">None</option>
                                    <option value="0">I don't know</option>
                                </select>
                                
                                <span class="input-btn-addon">
                                    <button type="input" class="btn btn-primary btn-sm" ng-click="form.open_copd_dialog()">?</button>
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- disease validation messages -->
                    <div class="has-error" ng-messages="lcs_form.disease.$error" ng-if="lcs_form.disease.$touched && !lcs_form.$pristine">
                        <span ng-message="required">
                            <p>Please select an option from the list above.</p>
                        </span>
                    </div>

                    <div class="form-group">
                        <label for="history" class="col-md-6 control-label">Parents' history of lung cancer (must be blood relative)?</label>
                        <div class="col-md-6">
                            <select name="history" id="history" class="form-control input-sm" ng-model="form.fields.history" required>
                                <option value="">Select...</option>
                                <option value="0">No parent had lung cancer</option>
                                <option value="1">One parent had lung cancer</option>
                                <option value="2">Both parents had lung cancer</option>
                                <option value="0">I don't know</option>
                            </select>
                        </div>
                    </div>

                    <!-- disease validation messages -->
                    <div class="has-error" ng-messages="lcs_form.history.$error" ng-if="lcs_form.history.$touched && !lcs_form.$pristine">
                        <span ng-message="required">
                            <p>Please select an option from the list above.</p>
                        </span>
                    </div>


                    <div class="form-group">
                        <label for="units" class="col-md-6 control-label">Units for entering height and weight</label>
                        <div class="col-md-6">
                            <select name="units" id="units" class="form-control input-sm" ng-model="form.fields.units" ng-change="form.validation.convert_bmi_fields(form.fields.units)">
                                <option value="metric">Metric (e.g., 175 cm or 60 kg)</option>
                                <option value="us" selected>US (e.g., 5 feet 9 inches or 115 pounds)</option>
                            </select>
                        </div>
                    </div>

                    <!-- ng-if is used to prevent evaluation -->
                    <div class="form-group">
                        <label for="height_feet" class="col-md-6 control-label">Height?</label>

                        <div class="col-md-3" ng-if="form.fields.units === 'us'">
                            <!-- min value: 1, max value: 10, model: form.fields.primary, required if US units are selected (feet only) -->
                            <input type="number" name="height_primary" id="height_primary" class="form-control input-sm" 
                                min="1"
                                max="10" 
                                ng-pattern="/^[0-9]+(\.[0-9]+)?/" 
                                ng-model="form.fields.primary" 
                                ng-model-options="{updateOn: 'blur'}" 
                                required>

                            <label class="label_below" for="height_primary">Feet</label>
                        </div>

                        <div class="col-md-3">
                            <!-- min value: 0, max value: 12 if using imperial (US) units, model: form.fields.secondary, required if US units are selected -->
                            <input type="number" name="height_secondary" id="height_secondary" class="form-control input-sm" 
                                min="{{form.fields.units === 'metric' ? 31 : 0}}"
                                max="{{form.fields.units === 'us' ? 12 : null}}"
                                ng-pattern="/^[0-9]+(\.[0-9]+)?/"
                                ng-model="form.fields.secondary"
                                ng-model-options="{updateOn: 'blur'}"
                                ng-required="form.fields.units === 'metric'">

                            <label class="label_below" for="height_secondary">{{form.fields.units === 'us' ? 'Inch(es)' : 'Centimeters'}}</label>
                        </div>

                        <label for="weight" class="col-md-6 control-label">Weight?</label>
                        <div class="col-md-6">
                            <!-- min value: weight for bmi of 15, max value: weight for bmi of 50, model: form.fields.weight -->
                            <input type="number" name="weight" id="weight" class="form-control input-sm" 
                                min="{{form.validation.weight(15)}}" 
                                max="{{form.validation.weight(50)}}" 
                                ng-pattern="/^[0-9]+(\.[0-9]+)?/" 
                                ng-model="form.fields.weight" 
                                ng-model-options="{updateOn: 'blur'}"
                                required>

                            <label class="label_below" for="weight">{{form.fields.units === 'us' ? 'Pounds' : 'Kilograms'}}</label>
                        </div>
                    </div>

                    <!-- height validation messages -->
                    <div class="has-error" ng-messages="lcs_form.height_primary.$error" ng-if="lcs_form.height_primary.$touched && !lcs_form.$pristine">
                        <span ng-message="required">
                            <p>Please enter your height in feet.</p>
                        </span>

                        <span ng-message="pattern">
                            <p>Please ensure that the height value above does not include any non-numeric characters.</p>
                        </span>

                        <span ng-message="min">
                            <p>Please ensure that the value provided for height is positive.</p>
                        </span>

                        <span ng-message="max">
                            <p>Please ensure that the value provided for height is less than 10 feet.</p>
                        </span>
                    </div>

                    <div class="has-error" ng-messages="lcs_form.height_secondary.$error" ng-if="lcs_form.height_secondary.$touched && !lcs_form.$pristine">
                        <span ng-message="required">
                            <p>Please enter your height in centimeters.</p>
                        </span>

                        <span ng-message="pattern">
                            <p>Please ensure that the height value above is positive and does not include any non-numeric characters.</p>
                        </span>

                        <span ng-message="max">
                            <p>Please ensure that the number of inches entered does not exceed 12.</p>
                        </span>

                        <span ng-message="min">
                            <p>Please ensure that the value provided for height is greater than 30.48 centimeters</p>
                        </span>
                    </div>

                    <!-- weight validation messages -->
                    <div class="has-error" ng-messages="lcs_form.weight.$error" ng-if="lcs_form.weight.$touched && !lcs_form.$pristine">
                        <span ng-message="required">
                            <p>Please enter your weight.</p>
                        </span>

                        <span ng-message="pattern">
                            <p>Please ensure that the weight value above is greater than 0 and does not include any non-numeric characters.</p>
                        </span>

                        <span ng-message="min, max">
                            <p>BMI is outside the range of 15-50.</p>
                        </span>
                    </div>

                    <div class="form-group">
                        <label for="education" class="col-md-6 control-label">Education?</label>
                        <div class="col-md-6">
                            <select name="education" id="education" class="form-control input-sm" ng-model="form.fields.education" required>
                                <option value="">Select...</option>
                                <option value="1">Less than high school</option>
                                <option value="1">High school, but did not graduate</option>
                                <option value="2">High school graduate</option>
                                <option value="3">Vocation/technical school, but no college</option>
                                <option value="4">Associate Degree or some college</option>
                                <option value="5">Bachelors (college) degree</option>
                                <option value="6">Graduate degree</option>
                            </select>
                        </div>
                    </div>

                    <!-- education validation messages -->
                    <div class="has-error" ng-messages="lcs_form.education.$error" ng-if="lcs_form.education.$touched && !lcs_form.$pristine">
                        <span ng-message="required">
                            <p>Please select an option from the list above.</p>
                        </span>
                    </div>

                    <div class="form-group">
                        <label for="race_group" class="col-md-6 control-label">Race or Ethnic Group</label>
                        <div class="col-md-6">
                            <select name="race_group" id="race_group" class="form-control input-sm" ng-model="form.fields.race" required>
                                <option value="">Select...</option>
                                <option value="0">White</option>
                                <option value="1">Black or African-American</option>
                                <option value="2">Hispanic</option>
                                <option value="3">Asian or Pacific Islander</option>
                                <option value="4">Other</option>
                            </select>
                        </div>
                    </div>

                    <!-- race_group validation messages -->
                    <div class="has-error" ng-messages="lcs_form.race_group.$error" ng-if="lcs_form.race_group.$touched && !lcs_form.$pristine">
                        <span ng-message="required">
                            <p>Please select an option from the list above.</p>
                        </span>
                    </div>

                    <div class="btn-toolbar pull-right">
                        <button class="btn btn-primary button-disabled" ng-disabled="lcs_form.$invalid">Calculate</button>
                        <button class="btn btn-default" type="reset" ng-click="lcs_form.$setPristine()">Reset</button>
                    </div>


                    <div class="clearfix"><br><br></div>
                    {{form.fields | json}}

                    <div class="clearfix"><br><br></div>
                    {{form.getParameters() | json}}
                </form>
            </div>
        </div>
    </div>

    <div class="col-md-6">
    Contents
    </div>

</div>
